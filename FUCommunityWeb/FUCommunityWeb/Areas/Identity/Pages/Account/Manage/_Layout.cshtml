@{
    if (ViewData.TryGetValue("ParentLayout", out var parentLayout) && parentLayout != null)

    {

        Layout = parentLayout.ToString();

    }

    else

    {

        Layout = "/Views/Shared/_Layout.cshtml";

    }
}

<div class="container-fluid mt-4 profile">
    <h1 class="title text-start">SETTING</h1> <!-- Align profile title to the left -->
    <div class="row justify-content-center">
        <!-- Sidebar -->
        <div class="col-md-3">
            <div class="sidebar">
                <img src="/img/avt2.jpg" class="avatar mb-3 rounded-circle" alt="Avatar">
                <!-- Replace with image, round it -->
                <h4 class="username mb-1">Nguyen Van A</h4> <!-- Smaller username -->
                <p class="points">Points of week: <span>100</span></p>
                <!-- Smaller points text, closer to username -->
                <div class="d-flex mb-3">
                    <button class="btn btn-changeavt" data-bs-toggle="modal" data-bs-target="#changeAvatarModal">Change Avatar</button>
                    <button class="btn btn-editprofile" data-bs-toggle="modal" data-bs-target="#editProfileModal">Edit Profile</button>
                </div>
                <ul class="list-group">
                    <partial name="_ManageNav" />
                </ul>
            </div>
        </div>
        <!-- My Profile Section -->
        <div class="col-md-9">
            @RenderBody()
        </div>
    </div>
</div>

<!-- Modal for Change Avatar -->
<div class="modal fade" id="changeAvatarModal" tabindex="-1" aria-labelledby="changeAvatarModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeAvatarModalLabel">Change Avatar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Avatar change form -->
                <form>
                    <div class="mb-3">
                        <label for="avatarUpload" class="form-label">Upload new avatar</label>
                        <input type="file" class="form-control" id="avatarUpload">
                    </div>
                    <button type="submit" class="btn ">Save changes</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Edit Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form asp-action="EditProfile" method="post">
                    <div class="mb-3">
                        <label for="fullName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="fullName" name="FullName" value="@Model.User.FullName">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="Email" value="@Model.User.Email">
                    </div>
                    <div class="mb-3">
                        <label for="bio" class="form-label">Bio</label>
                        <textarea class="form-control" id="bio" name="Bio">@Model.User.Bio</textarea>
                    </div>
                    <div class="mb-3">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" class="form-control" id="address" name="Address" value="@Model.User.Address">
                    </div>
                    <div class="mb-3">
                        <label for="gender" class="form-label">Gender</label>
                        <select class="form-control" id="gender" name="Gender">
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="dob" class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" name="Dob">
                    </div>
                    <div class="mb-3">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phoneNumber" name="PhoneNumber" value="@Model.User.PhoneNumber">
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="Description">@Model.User.Description</textarea>
                    </div>
                    <div class="modal-footer text-end">
                        <button type="button" class="btn-cancel" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn">Save changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @RenderSection("Scripts", required: false)
}
